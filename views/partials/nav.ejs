<header class="fixed-top bg-white border-bottom" style="z-index: 1030;">
  
  <div class="container-fluid px-4 d-flex justify-content-between align-items-center" style="height: 80px; max-width: 1600px;">

    <a href="/" class="text-decoration-none d-flex align-items-center">
      <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" style="height: 32px; fill: #FF385C; display: block;"><path d="M16 1c2.008 0 3.463.963 4.751 3.269l.533 1.025c1.954 3.83 6.114 12.54 7.1 14.836l.145.353c.667 1.591.91 3.162.726 4.692-.246 2.05-1.453 4.192-3.313 5.877-1.2.088-2.615.534-4.158 1.178-1.544.644-2.88 1.09-3.784 1.17l-.5.01-.005-.5c-.01-1.028-.434-2.37-1.266-4.008l-.208-.403c-.233-.44-.48-1.004-.75-1.688l-.205-.516c-.287-.72-.563-1.41-.8-2.02l-.242-.614c-.03-.075-.058-.15-.084-.223-.024-.068-.048-.135-.07-.202-.02-.057-.038-.112-.056-.165l-.014-.04c-.365-1.03-.687-1.93-1.123-3.153L11.3 17.4c-1.111-3.18-2.083-5.91-2.92-8.204-.836-2.293-1.436-3.868-1.782-4.665l-.086-.197C5.97 3.238 7.394 2.188 9.294 1.54l.504-.15c1.168-.314 2.65-.54 4.298-.636l.462-.024L16 1zm0 2c-1.393 0-2.73.186-3.953.535l-.427.13C10.51 2.146 9.68 2.87 9.073 4.02l-.123.242c.328.756.915 2.308 1.742 4.576.828 2.268 1.79 4.972 2.89 8.12l.275.776c.445 1.25.775 2.17 1.144 3.21l.015.04.056.166.07.203.084.223.243.614c.237.608.513 1.3.8 2.02l.205.516c.27.684.516 1.247.748 1.686l.209.404c.732 1.44 1.106 2.623 1.127 3.513.86-.09 2.147-.514 3.633-1.134 1.488-.62 2.85-1.05 3.998-1.146 1.465-1.328 2.42-2.96 2.617-4.58.152-1.256-.05-2.54-.59-3.83l-.145-.353c-.97-2.257-5.06-10.8-6.974-14.55l-.533-1.025C19.066 3.193 17.828 2.52 16.326 2.9l-.326.098zM16 12c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 2c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2z" fill="#FF385C"></path></svg>
      <span class="d-none d-lg-block fw-bold text-danger ms-1 fs-5">airbnb</span>
    </a>

    <div class="d-none d-md-flex align-items-center gap-4">
        <a href="/" class="text-dark text-decoration-none fw-bold small border-bottom border-2 border-dark pb-2">Homes</a>
        <a href="#" class="text-muted text-decoration-none fw-bold small pb-2 hover-dark opacity-75">Experiences</a>
        <a href="#" class="text-muted text-decoration-none fw-bold small pb-2 hover-dark opacity-75">Services</a>
    </div>

    <div class="d-flex align-items-center gap-2">
      
      <% if (isAuthenticated) { %>
        <a href="/bookings" class="btn btn-link text-dark text-decoration-none fw-bold rounded-pill px-3 hover-effect small">
          Trips
        </a>
        <a href="/favourite-list" class="btn btn-link text-dark text-decoration-none fw-bold rounded-pill px-3 hover-effect small">
          Saved
        </a>
      <% } %>

      <a href="/host" class="btn btn-link text-dark text-decoration-none fw-bold rounded-pill px-3 hover-effect small d-none d-md-block">
        Switch to Host
      </a>

      <button class="btn btn-link text-dark rounded-circle p-2 hover-effect d-flex align-items-center justify-content-center" 
              style="width: 40px; height: 40px;"
              data-bs-toggle="modal" 
              data-bs-target="#languageModal">
          <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" style="height: 16px; width: 16px; fill: currentcolor;"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zm0 1.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13zM2.08 7.5h3.09a10.05 10.05 0 0 1 .46-3.83A6.5 6.5 0 0 1 2.08 7.5zm.36 1h2.77a10.05 10.05 0 0 1-.46 3.83A6.5 6.5 0 0 1 2.44 8.5zm11.12 0h2.77a6.5 6.5 0 0 1-3.23 3.83 10.05 10.05 0 0 1-.46-3.83h.92zm.36-1h-3.09a10.05 10.05 0 0 1-.46-3.83 6.5 6.5 0 0 1 3.55 3.83zm-6.86-3.86a8.55 8.55 0 0 0-.64 3.86h3.16a8.55 8.55 0 0 0-.64-3.86A5.48 5.48 0 0 0 8 2.63a5.48 5.48 0 0 0-.94 1.01zm-1.12 4.86a8.55 8.55 0 0 0 .64 3.86A5.48 5.48 0 0 0 8 13.37a5.48 5.48 0 0 0 .94-1.01 8.55 8.55 0 0 0 .64-3.86H6.94z"></path></svg>
      </button>

      <div class="dropdown">
          <div class="user-menu-pill border shadow-sm p-1 ps-2 d-flex align-items-center gap-2 rounded-pill" data-bs-toggle="dropdown" style="cursor: pointer;">
            <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" style="display: block; fill: none; height: 16px; width: 16px; stroke: currentcolor; stroke-width: 3; overflow: visible;"><g fill="none" fill-rule="nonzero"><path d="m2 16h28"></path><path d="m2 24h28"></path><path d="m2 8h28"></path></g></svg>
            <div class="bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center fw-bold" style="width: 30px; height: 30px; font-size: 0.8rem;">
              <% if (isAuthenticated) { %><%= user.firstName.charAt(0) %><% } else { %><i class="bi bi-person-fill"></i><% } %>
            </div>
          </div>
          <ul class="dropdown-menu dropdown-menu-end shadow-lg border-0 rounded-4 mt-2 p-3">
             <% if (isAuthenticated) { %>
                <li><span class="dropdown-header fw-bold">Hi, <%= user.firstName %></span></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item py-2 fw-bold" href="/bookings">My Trips</a></li>
                <li><a class="dropdown-item py-2 fw-bold" href="/favourite-list">Wishlist</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item py-2" href="/host/host-home-list">Manage Listings</a></li>
                <li>
                  <form action="/logout" method="POST" class="m-0"><button class="dropdown-item text-danger fw-bold py-2">Log out</button></form>
                </li>
             <% } else { %>
                <li><a class="dropdown-item fw-bold py-2" href="/login">Log in</a></li>
                <li><a class="dropdown-item py-2" href="/signup">Sign up</a></li>
             <% } %>
          </ul>
      </div>
    </div>
  </div>

  <div class="w-100 d-flex justify-content-center pb-3">
    <div class="border rounded-pill shadow-sm d-flex align-items-center bg-white" style="width: 100%; max-width: 650px; border-color: #dddddd !important; height: 64px;">
        
        <form action="/search" method="GET" class="d-flex w-100 align-items-center h-100">
            
            <div class="px-4 h-100 d-flex flex-column justify-content-center flex-grow-1 border-end position-relative hover-bg-gray rounded-pill-start" style="cursor: pointer;">
                <label class="d-block fw-bold text-dark mb-0" style="font-size: 0.75rem;">Where</label>
                <input type="text" name="location" class="form-control border-0 bg-transparent shadow-none p-0 text-dark text-truncate" 
                       placeholder="Search destinations" style="font-size: 0.9rem;">
            </div>

            <div class="px-3 h-100 d-flex flex-column justify-content-center border-end position-relative hover-bg-gray" style="width: 140px; cursor: pointer;">
                <label class="d-block fw-bold text-dark mb-0" style="font-size: 0.75rem;">Check-in</label>
                <input type="text" name="checkIn" class="form-control border-0 bg-transparent shadow-none p-0 text-muted" 
                       placeholder="Add dates" onfocus="(this.type='date')" onblur="(this.type='text')" style="font-size: 0.9rem;">
            </div>

            <div class="px-3 h-100 d-flex flex-column justify-content-center position-relative hover-bg-gray" style="width: 140px; cursor: pointer;">
                <label class="d-block fw-bold text-dark mb-0" style="font-size: 0.75rem;">Check-out</label>
                <input type="text" name="checkOut" class="form-control border-0 bg-transparent shadow-none p-0 text-muted" 
                       placeholder="Add dates" onfocus="(this.type='date')" onblur="(this.type='text')" style="font-size: 0.9rem;">
            </div>

            <div class="pe-2">
                <button type="submit" class="btn rounded-circle d-flex align-items-center justify-content-center shadow-sm" 
                        style="background: #FF385C; border: none; width: 48px; height: 48px;">
                    <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" style="display: block; fill: none; height: 16px; width: 16px; stroke: white; stroke-width: 4; overflow: visible;"><g fill="none"><path d="m13 24c6.0751322 0 11-4.9248678 11-11 0-6.07513225-4.9248678-11-11-11-6.07513225 0-11 4.92486775-11 11 0 6.0751322 4.92486775 11 11 11zm8-3 9 9"></path></g></svg>
                </button>
            </div>
        </form>
    </div>
  </div>

</header>

<div class="modal fade" id="languageModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content rounded-4 shadow-lg" style="height: 85vh;">
      <div class="modal-header border-bottom-0 p-3">
        <button type="button" class="btn-close ms-2 mt-2" data-bs-dismiss="modal" aria-label="Close"></button>
        <ul class="nav nav-pills ms-4" id="pills-tab" role="tablist">
            <li class="nav-item"><button class="nav-link text-dark fw-bold bg-transparent active text-decoration-underline ps-0">Language and region</button></li>
            <li class="nav-item"><button class="nav-link text-muted fw-bold bg-transparent">Currency</button></li>
        </ul>
      </div>
      <div class="modal-body px-5 py-4">
        <div class="card border p-4 rounded-4 mb-5 bg-light border-0">
            <div class="d-flex justify-content-between align-items-center">
                <div><h5 class="fw-bold mb-1">Translation <i class="bi bi-translate"></i></h5><div class="text-muted small">Automatically translate descriptions and reviews to English.</div></div>
                <div class="form-check form-switch"><input class="form-check-input p-2" type="checkbox" role="switch" checked style="width: 3.5em; height: 2em; cursor: pointer; background-color: black; border-color: black;"></div>
            </div>
        </div>
        <h5 class="fw-bold mb-4">Choose a language and region</h5>
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3">
            <div class="col"><a href="#" class="btn w-100 text-start py-2 px-3 rounded-3 border-dark" style="border: 1px solid black;"><div class="small fw-bold">English</div><div class="text-muted" style="font-size: 0.8rem;">India</div></a></div>
            <div class="col"><a href="#" class="btn btn-link text-dark text-decoration-none w-100 text-start py-2 px-3 rounded-3 hover-bg-light"><div class="small">Deutsch</div><div class="text-muted" style="font-size: 0.8rem;">Deutschland</div></a></div>
            <div class="col"><a href="#" class="btn btn-link text-dark text-decoration-none w-100 text-start py-2 px-3 rounded-3 hover-bg-light"><div class="small">Español</div><div class="text-muted" style="font-size: 0.8rem;">España</div></a></div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
    .hover-dark:hover { color: black !important; }
    .hover-bg-gray:hover { background-color: #EBEBEB !important; border-radius: 30px; }
    .rounded-pill-start { border-top-left-radius: 50rem; border-bottom-left-radius: 50rem; }
    input::placeholder { color: #6c757d; opacity: 0.8; }
    .user-menu-pill:hover { box-shadow: 0 2px 5px rgba(0,0,0,0.15); }
</style>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>